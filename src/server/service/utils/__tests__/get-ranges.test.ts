import test from "ava";
import { chunkRanges, getRanges } from "../get-ranges";

test("getRanges", async (t) => {
  t.deepEqual(getRanges([2, 3, 4, 5, 10, 18, 19, 20]), [
    [2, 5],
    [10, 10],
    [18, 20],
  ]);
  t.deepEqual(getRanges([1, 2, 3, 5, 7, 9, 10, 11, 12, 14]), [
    [1, 3],
    [5, 5],
    [7, 7],
    [9, 12],
    [14, 14],
  ]);
  t.deepEqual(getRanges([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]), [[1, 10]]);
});

test("chunkRanges", async (t) => {
  t.deepEqual(chunkRanges([[0, 100]], 100), [
    [0, 99],
    [100, 100],
  ]);
  t.deepEqual(
    chunkRanges(
      [
        [1040, 218966],
        [220367, 224754],
      ],
      10000
    ),
    [
      [1040, 11039],
      [11040, 21039],
      [21040, 31039],
      [31040, 41039],
      [41040, 51039],
      [51040, 61039],
      [61040, 71039],
      [71040, 81039],
      [81040, 91039],
      [91040, 101039],
      [101040, 111039],
      [111040, 121039],
      [121040, 131039],
      [131040, 141039],
      [141040, 151039],
      [151040, 161039],
      [161040, 171039],
      [171040, 181039],
      [181040, 191039],
      [191040, 201039],
      [201040, 211039],
      [211040, 218966],
      [220367, 224754],
    ]
  );
});
